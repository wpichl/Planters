{"version":3,"file":"use-window-size.js","sources":["../../../node_modules/@react-hook/throttle/src/index.tsx","../../../node_modules/@react-hook/event/src/index.tsx","../../../node_modules/@react-hook/latest/src/index.tsx","../../../node_modules/@react-hook/passive-layout-effect/src/index.tsx","../../src/index.tsx"],"sourcesContent":["import * as React from 'react'\nimport useLatest from '@react-hook/latest'\n\nconst perf = typeof performance !== 'undefined' ? performance : Date\nconst now = () => perf.now()\n\nexport function useThrottleCallback<CallbackArguments extends any[]>(\n  callback: (...args: CallbackArguments) => void,\n  fps = 30,\n  leading = false\n): (...args: CallbackArguments) => void {\n  const storedCallback = useLatest(callback)\n  const ms = 1000 / fps\n  const prev = React.useRef(0)\n  const trailingTimeout = React.useRef<ReturnType<typeof setTimeout>>()\n  const clearTrailing = () =>\n    trailingTimeout.current && clearTimeout(trailingTimeout.current)\n  const deps = [fps, leading, storedCallback]\n\n  // Reset any time the deps change\n  React.useEffect(\n    () => () => {\n      prev.current = 0\n      clearTrailing()\n    },\n    deps\n  )\n\n  return React.useCallback(function () {\n    // eslint-disable-next-line prefer-rest-params\n    const args = arguments\n    const rightNow = now()\n    const call = () => {\n      prev.current = rightNow\n      clearTrailing()\n      storedCallback.current.apply(null, args as any)\n    }\n    const current = prev.current\n    // leading\n    if (leading && current === 0) return call()\n    // body\n    if (rightNow - current > ms) {\n      if (current > 0) return call()\n      prev.current = rightNow\n    }\n    // trailing\n    clearTrailing()\n    trailingTimeout.current = setTimeout(() => {\n      call()\n      prev.current = 0\n    }, ms)\n  }, deps)\n}\n\nexport function useThrottle<State>(\n  initialState: State | (() => State),\n  fps?: number,\n  leading?: boolean\n): [State, React.Dispatch<React.SetStateAction<State>>] {\n  const state = React.useState<State>(initialState)\n  return [state[0], useThrottleCallback(state[1], fps, leading)]\n}\n","import * as React from 'react'\nimport useLayoutEffect from '@react-hook/passive-layout-effect'\nimport useLatest from '@react-hook/latest'\n\nfunction useEvent<\n  T extends Window = Window,\n  K extends keyof WindowEventMap = keyof WindowEventMap\n>(\n  target: Window | null,\n  type: K,\n  listener: WindowEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends Document = Document,\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n>(\n  target: Document | null,\n  type: K,\n  listener: DocumentEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends HTMLElement = HTMLElement,\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n>(\n  target: React.RefObject<T> | T | null,\n  type: K,\n  listener: ElementEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent(\n  target: any,\n  type: any,\n  listener: any,\n  cleanup: any = noop\n): void {\n  const storedListener = useLatest(listener)\n  const storedCleanup = useLatest(cleanup)\n\n  useLayoutEffect(() => {\n    const targetEl = target && 'current' in target ? target.current : target\n    if (!targetEl) return\n\n    const listener = function (this: any, ...args: any[]) {\n      storedListener.current.apply(this, args)\n    }\n\n    targetEl.addEventListener(type, listener)\n    const cleanup = storedCleanup.current\n\n    return () => {\n      targetEl.removeEventListener(type, listener)\n      cleanup()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target, type])\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nfunction noop() {}\n\nexport type ElementEventListener<\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n> = (this: HTMLElement, ev: HTMLElementEventMap[K]) => any\n\nexport type DocumentEventListener<\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n> = (this: Document, ev: DocumentEventMap[K]) => any\n\nexport type WindowEventListener<\n  K extends keyof WindowEventMap = keyof WindowEventMap\n> = (this: Document, ev: WindowEventMap[K]) => any\n\nexport default useEvent\n","import * as React from 'react'\n\nconst useLatest = <T extends any>(current: T) => {\n  const storedValue = React.useRef(current)\n  storedValue.current = current\n  return storedValue\n}\n\nexport default useLatest\n","import * as React from 'react'\n\nconst usePassiveLayoutEffect =\n  React[\n    typeof document !== 'undefined' && document.createElement !== void 0\n      ? 'useLayoutEffect'\n      : 'useEffect'\n  ]\n\nexport default usePassiveLayoutEffect\n","/* eslint-disable import/no-extraneous-dependencies */\nimport {useThrottle} from '@react-hook/throttle'\nimport useEvent from '@react-hook/event'\n\nconst emptyObj = {}\n\nexport interface ThrottledWindowSizeOptions {\n  initialWidth?: number\n  initialHeight?: number\n  fps?: number\n  leading?: boolean\n}\n\nconst win = typeof window === 'undefined' ? null : window\nconst getSize = () =>\n  [\n    document.documentElement.clientWidth,\n    document.documentElement.clientHeight,\n  ] as const\n\nexport const useWindowSize = (\n  options: ThrottledWindowSizeOptions = emptyObj\n): readonly [number, number] => {\n  const {fps, leading, initialWidth = 0, initialHeight = 0} = options\n  const [size, setThrottledSize] = useThrottle<readonly [number, number]>(\n    /* istanbul ignore next */\n    typeof document === 'undefined' ? [initialWidth, initialHeight] : getSize,\n    fps,\n    leading\n  )\n  const setSize = (): void => setThrottledSize(getSize)\n\n  useEvent(win, 'resize', setSize)\n  useEvent(win, 'orientationchange', setSize)\n\n  return size\n}\n\nexport const useWindowHeight = (\n  options?: Omit<ThrottledWindowSizeOptions, 'initialWidth'>\n): number => useWindowSize(options)[1]\n\nexport const useWindowWidth = (\n  options?: Omit<ThrottledWindowSizeOptions, 'initialHeight'>\n): number => useWindowSize(options)[0]\n"],"names":["useThrottleCallback","callback","fps","leading","prev","current","clearTrailing","storedCallback","useLatest","ms","React","trailingTimeout","clearTimeout","deps","args","arguments","rightNow","now","call","apply","setTimeout","useEvent","target","type","listener","cleanup","storedListener","this","noop","storedCleanup","useLayoutEffect","targetEl","addEventListener","removeEventListener","storedValue","perf","performance","Date","usePassiveLayoutEffect","document","createElement","emptyObj","win","window","getSize","documentElement","clientWidth","clientHeight","useWindowSize","options","initialWidth","initialHeight","initialState","state","useThrottle","size","setThrottledSize","setSize"],"mappings":"8OAMO,SAASA,EACdC,EACAC,EACAC,gBAaIC,EAAKC,QAAU,EACfC,aAfJJ,IAAAA,EAAM,aACNC,IAAAA,EAAU,OAEJI,EAAiBC,EAAUP,GAC3BQ,EAAK,IAAOP,EACZE,EAAOM,SAAa,GACpBC,EAAkBD,WAClBJ,EAAgB,kBACpBK,EAAgBN,SAAWO,aAAaD,EAAgBN,UACpDQ,EAAO,CAACX,EAAKC,EAASI,UAG5BG,aACE,sBAIAG,GAGKH,eAAkB,eAEjBI,EAAOC,UACPC,EAAWC,IACXC,EAAO,WACXd,EAAKC,QAAUW,EACfV,IACAC,EAAeF,QAAQc,MAAM,KAAML,IAE/BT,EAAUD,EAAKC,WAEjBF,GAAuB,IAAZE,EAAe,OAAOa,OAEjCF,EAAWX,EAAUI,EAAI,IACvBJ,EAAU,EAAG,OAAOa,IACxBd,EAAKC,QAAUW,EAGjBV,IACAK,EAAgBN,QAAUe,YAAW,WACnCF,IACAd,EAAKC,QAAU,IACdI,KACFI,GCpBL,SAASQ,EACPC,EACAC,EACAC,EACAC,2CAS2CX,2BAAAA,kBACvCY,EAAerB,QAAQc,MAAMQ,KAAMb,YAVvCW,IAAAA,EAAeG,OAETF,EAAiBlB,EAAUgB,GAC3BK,EAAgBrB,EAAUiB,GAEhCK,GAAgB,eACRC,EAAWT,GAAU,YAAaA,EAASA,EAAOjB,QAAUiB,KAC7DS,OAECP,IAINO,EAASC,iBAAiBT,EAAMC,OAC1BC,EAAUI,EAAcxB,eAEvB,WACL0B,EAASE,oBAAoBV,EAAMC,GACnCC,QAGD,CAACH,EAAQC,IAId,SAASK,KC1DT,IAAMpB,EAAY,SAAgBH,OAC1B6B,EAAcxB,SAAaL,UACjC6B,EAAY7B,QAAUA,EACf6B,GFFHC,EAA8B,oBAAhBC,YAA8BA,YAAcC,KAC1DpB,EAAM,kBAAMkB,EAAKlB,OGFjBqB,EACJ5B,EACsB,oBAAb6B,eAAuD,IAA3BA,SAASC,cACxC,kBACA,aCFFC,EAAW,GASXC,EAAwB,oBAAXC,OAAyB,KAAOA,OAC7CC,EAAU,iBACd,CACEL,SAASM,gBAAgBC,YACzBP,SAASM,gBAAgBE,eAGhBC,EAAgB,SAC3BC,YAAAA,IAAAA,EAAsCR,SAEsBQ,EAArD/C,IAAAA,IAAKC,IAAAA,YAAS+C,aAAAA,aAAe,QAAGC,gBJ+BlC,SACLC,EACAlD,EACAC,OAEMkD,EAAQ3C,WAAsB0C,SAC7B,CAACC,EAAM,GAAIrD,EAAoBqD,EAAM,GAAInD,EAAKC,IIpCpBmD,CAEX,oBAAbf,SAA2B,CAACW,aAHkB,KAGaN,EAClE1C,EACAC,GAJKoD,OAAMC,OAMPC,EAAU,kBAAYD,EAAiBZ,WAE7CvB,EAASqB,EAAK,SAAUe,GACxBpC,EAASqB,EAAK,oBAAqBe,GAE5BF,qBAGsB,SAC7BN,UACWD,EAAcC,GAAS,uCAEN,SAC5BA,UACWD,EAAcC,GAAS"}